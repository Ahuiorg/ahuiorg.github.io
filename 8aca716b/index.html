<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>VUE3 项目搭建 | HaloHuang Blog</title><meta name="keywords" content="vue3,watch,watchEffect"><meta name="author" content="黄贻飞,halohuang_web@163.com"><meta name="copyright" content="黄贻飞"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="前言Vue 3 正式版已经发布有一段时间了，随着 Vite 脚手架注定成为下一代前端工具链，许多用户都想基于 Vite 来构建 Vue 项目，如果想基于 Vite 构建 Vue 3 项目，社区模板完全满足您的需求，如果想构建 Vite 3 + Vue 3 + JavaScript 项目，那社区模板不太能满足您的需求，因为社区模板提供 Vue 3 项目几乎是基于 Vite 2 + TypeScrip">
<meta property="og:type" content="article">
<meta property="og:title" content="VUE3 项目搭建">
<meta property="og:url" content="https://leejs.cn/8aca716b/index.html">
<meta property="og:site_name" content="HaloHuang Blog">
<meta property="og:description" content="前言Vue 3 正式版已经发布有一段时间了，随着 Vite 脚手架注定成为下一代前端工具链，许多用户都想基于 Vite 来构建 Vue 项目，如果想基于 Vite 构建 Vue 3 项目，社区模板完全满足您的需求，如果想构建 Vite 3 + Vue 3 + JavaScript 项目，那社区模板不太能满足您的需求，因为社区模板提供 Vue 3 项目几乎是基于 Vite 2 + TypeScrip">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://images-origin.wallwiz.link/58860ba7dc1d3f00010acdef_1">
<meta property="article:published_time" content="2022-12-23T02:19:56.000Z">
<meta property="article:modified_time" content="2022-12-23T02:21:38.951Z">
<meta property="article:author" content="黄贻飞">
<meta property="article:tag" content="vue3">
<meta property="article:tag" content="watch">
<meta property="article:tag" content="watchEffect">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://images-origin.wallwiz.link/58860ba7dc1d3f00010acdef_1"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://leejs.cn/8aca716b/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'VUE3 项目搭建',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-12-23 10:21:38'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.2.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">64</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">36</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">15</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-heartbeat"></i><span> Media</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-image"></i><span> Gallery</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://images-origin.wallwiz.link/58860ba7dc1d3f00010acdef_1')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">HaloHuang Blog</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-heartbeat"></i><span> Media</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-image"></i><span> Gallery</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">VUE3 项目搭建</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-12-23T02:19:56.000Z" title="发表于 2022-12-23 10:19:56">2022-12-23</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-12-23T02:21:38.951Z" title="更新于 2022-12-23 10:21:38">2022-12-23</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/vue3/">vue3</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="VUE3 项目搭建"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>Vue 3 正式版已经发布有一段时间了，随着 Vite 脚手架注定成为下一代前端工具链，许多用户都想基于 Vite 来构建 Vue 项目，如果想基于 Vite 构建 Vue 3 项目，社区模板完全满足您的需求，如果想构建 Vite 3 + Vue 3 + JavaScript 项目，那社区模板不太能满足您的需求，因为社区模板提供 Vue 3 项目几乎是基于 Vite 2 + TypeScript 构建，对于不熟悉 TypeScript 语言的用户不是很友好，因此接下来从 0 开始手把手带大家搭建一套规范的 Vite 3 + Vue 3 + JavaScript 前端工程化项目环境。</p>
<p>本文章篇幅较长，从以下几个方面展开：</p>
<ul>
<li>基础搭建</li>
<li>代码规范</li>
<li>提交规范</li>
<li>自动部署</li>
</ul>
<blockquote>
<p>本项目完整代码托管在 <strong>GitHub 仓库</strong>[1]，欢迎点亮小星星 🌟🌟</p>
</blockquote>
<h1 id="技术栈"><a href="#技术栈" class="headerlink" title="技术栈"></a>技术栈</h1><ul>
<li>⚡️ <strong>Vite 3</strong>[2] - 构建工具（就是快！）</li>
<li>🖖 <strong>Vue 3</strong>[3] - 渐进式 JavaScript 框架</li>
<li>🚦 <strong>Vue Router</strong>[4] - 官方路由管理器</li>
<li>📦 <strong>Pinia</strong>[5] - 值得你喜欢的 Vue Store</li>
<li>💻 <strong>TDesign</strong>[6] - TDesign 适配桌面端的组件库</li>
<li>🎨 <strong>Less</strong>[7] - CSS 预处理器</li>
<li>🔗 <strong>Axios</strong>[8] - 一个基于 promise 的网络请求库，可以用于浏览器和 node.js</li>
<li>🧰 <strong>Husky</strong>[9] + <strong>Lint-Staged</strong>[10] - Git Hook 工具</li>
<li>🛡️ <strong>EditorConfig</strong>[11] + <strong>ESLint</strong>[12] + <strong>Prettier</strong>[13] + <strong>Stylelint</strong>[14] - 代码规范</li>
<li>🔨 <strong>Commitizen</strong>[15] + <strong>Commitlint</strong>[16] - 提交规范</li>
<li>💡 <strong>GitHub Actions</strong>[17] - 自动部署</li>
</ul>
<h1 id="基础搭建"><a href="#基础搭建" class="headerlink" title="基础搭建"></a>基础搭建</h1><h2 id="构建项目雏形"><a href="#构建项目雏形" class="headerlink" title="构建项目雏形"></a>构建项目雏形</h2><p>确保你安装了最新版本的 <strong>Node.js</strong>[18]，然后在命令行中运行以下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># npm 6.x</span><br><span class="line">npm create vite@latest vite-vue-js-template --template vue</span><br><span class="line"></span><br><span class="line"># npm 7+, extra double-dash is needed:</span><br><span class="line">npm create vite@latest vite-vue-js-template -- --template vue</span><br><span class="line"></span><br><span class="line"># yarn</span><br><span class="line">yarn create vite vite-vue-js-template --template vue</span><br><span class="line"></span><br><span class="line"># pnpm</span><br><span class="line">pnpm create vite vite-vue-js-template --template vue</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>这一指令将会安装并执行 <strong>create-vite</strong>[19]，它是一个基本模板快速启动项目工具。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz/pfCCZhlbMQTKJwX2UrGjOSEIicyga1nNBBSqUa6rfAQmOwSkAfrOCXeR8KHgOaVbiaEcLw1kVVBrd4pAb9n8VYYw/640?wx_fmt=other&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片">初始化项目</p>
<p>在项目被创建后，通过以下步骤安装依赖并启动开发服务器：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 打开项目</span><br><span class="line">cd &lt;your-project-name&gt;</span><br><span class="line"></span><br><span class="line"># 安装依赖</span><br><span class="line">npm install</span><br><span class="line"></span><br><span class="line"># 启动项目</span><br><span class="line">npm run dev</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p><img src="https://mmbiz.qpic.cn/mmbiz/pfCCZhlbMQTKJwX2UrGjOSEIicyga1nNBnVoibf5iaQYQm090gdAyJ7nZJViaKicpQRd9JhibGbNdnF3pt7BIMuJJJqA/640?wx_fmt=other&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片">启动项目</p>
<h2 id="Vite-基础配置"><a href="#Vite-基础配置" class="headerlink" title="Vite 基础配置"></a>Vite 基础配置</h2><p>Vite 配置文件 <code>vite.config.js</code> 位于项目根目录下，项目启动时会自动读取。</p>
<p>本项目针对公共基础路径、自定义路径别名、服务器选项、构建选项等做了如下基础配置：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">import &#123; defineConfig &#125; from &#x27;vite&#x27;;</span><br><span class="line">import &#123; resolve &#125; from &#x27;path&#x27;;</span><br><span class="line">import vue from &#x27;@vitejs/plugin-vue&#x27;;</span><br><span class="line"></span><br><span class="line">export default defineConfig(&#123;</span><br><span class="line">    base: &#x27;./&#x27;,</span><br><span class="line">    plugins: [</span><br><span class="line">      vue(),</span><br><span class="line">    ],</span><br><span class="line">    resolve: &#123;</span><br><span class="line">      alias: &#123;</span><br><span class="line">        &#x27;@&#x27;: resolve(__dirname, &#x27;./src&#x27;) ,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    server: &#123;</span><br><span class="line">      // 是否开启 https</span><br><span class="line">      https: false,</span><br><span class="line">      // 端口号</span><br><span class="line">      port: 3000,</span><br><span class="line">      // 监听所有地址</span><br><span class="line">      host: &#x27;0.0.0.0&#x27;,</span><br><span class="line">      // 服务启动时是否自动打开浏览器</span><br><span class="line">      open: true,</span><br><span class="line">      // 允许跨域</span><br><span class="line">      cors: true,</span><br><span class="line">      // 自定义代理规则</span><br><span class="line">      proxy: &#123;&#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    build: &#123;</span><br><span class="line">      // 设置最终构建的浏览器兼容目标</span><br><span class="line">      target: &#x27;es2015&#x27;,</span><br><span class="line">      // 构建后是否生成 source map 文件</span><br><span class="line">      sourcemap: false,</span><br><span class="line">      //  chunk 大小警告的限制（以 kbs 为单位）</span><br><span class="line">      chunkSizeWarningLimit: 2000,</span><br><span class="line">      // 启用/禁用 gzip 压缩大小报告</span><br><span class="line">      reportCompressedSize: false,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>关于 Vite 更多配置项及用法，请查看 Vite 官网 <strong>vitejs.dev&#x2F;config&#x2F;</strong>[20] 。</p>
<h2 id="规范目录结构"><a href="#规范目录结构" class="headerlink" title="规范目录结构"></a>规范目录结构</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">├── dist/</span><br><span class="line">└── src/</span><br><span class="line">    ├── api/                       // 接口请求目录</span><br><span class="line">    ├── assets/                    // 静态资源目录</span><br><span class="line">    ├── common/                    // 通用类库目录</span><br><span class="line">    ├── components/                // 公共组件目录</span><br><span class="line">    ├── router/                    // 路由配置目录</span><br><span class="line">    ├── store/                     // 状态管理目录</span><br><span class="line">    ├── style/                     // 通用样式目录</span><br><span class="line">    ├── utils/                     // 工具函数目录</span><br><span class="line">    ├── views/                     // 页面组件目录</span><br><span class="line">    ├── App.vue</span><br><span class="line">    ├── main.js</span><br><span class="line">├── tests/                         // 单元测试目录</span><br><span class="line">├── index.html</span><br><span class="line">├── jsconfig.json                  // JavaScript 配置文件</span><br><span class="line">├── vite.config.js                 // Vite 配置文件</span><br><span class="line">└── package.json</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h2 id="集成-Vue-Router-路由工具"><a href="#集成-Vue-Router-路由工具" class="headerlink" title="集成 Vue Router 路由工具"></a>集成 Vue Router 路由工具</h2><h3 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i vue-router@4</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="创建路由配置文件"><a href="#创建路由配置文件" class="headerlink" title="创建路由配置文件"></a>创建路由配置文件</h3><p>在 <code>src/router</code> 目录下新建 <code>index.js</code> 文件与 <code>modules</code> 文件夹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">└── src/</span><br><span class="line">    ├── router/</span><br><span class="line">    	├── modules/  // 路由模块</span><br><span class="line">        ├── index.js  // 路由配置文件</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>关于路由表，建议根据功能的不同来拆分到 <code>modules</code> 文件夹中，好处是：</p>
<ul>
<li><p>方便后期维护</p>
</li>
<li><ul>
<li>减少 Git 合并代码冲突可能性</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">export default [</span><br><span class="line">  &#123;</span><br><span class="line">    path: &#x27;/&#x27;,</span><br><span class="line">    name: &#x27;home&#x27;,</span><br><span class="line">    component: () =&gt; import(&#x27;@/views/HomeView.vue&#x27;),</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: &#x27;/about&#x27;,</span><br><span class="line">    name: &#x27;about&#x27;,</span><br><span class="line">    component: () =&gt; import(&#x27;@/views/AboutView.vue&#x27;),</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line">复制代码</span><br><span class="line">import &#123; createRouter, createWebHistory &#125; from &#x27;vue-router&#x27;;</span><br><span class="line"></span><br><span class="line">import baseRouters from &#x27;./modules/base&#x27;;</span><br><span class="line"></span><br><span class="line">const routes = [...baseRouters];</span><br><span class="line"></span><br><span class="line">const router = createRouter(&#123;</span><br><span class="line">  history: createWebHistory(import.meta.env.BASE_URL),</span><br><span class="line">  routes,</span><br><span class="line">  scrollBehavior() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      el: &#x27;#app&#x27;,</span><br><span class="line">      top: 0,</span><br><span class="line">      behavior: &#x27;smooth&#x27;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">export default router;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>根据路由配置的实际情况，需要在 <code>src</code> 下创建 <code>views</code> 目录，用来存储页面组件。</p>
<h3 id="挂载路由配置"><a href="#挂载路由配置" class="headerlink" title="挂载路由配置"></a>挂载路由配置</h3><p>在 <code>main.js</code> 文件中挂载路由配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createApp &#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">import App from &#x27;./App.vue&#x27;;</span><br><span class="line">import router from &#x27;./router&#x27;;</span><br><span class="line"></span><br><span class="line">createApp(App).use(router).mount(&#x27;#app&#x27;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h2 id="集成-Pinia-全局状态管理工具"><a href="#集成-Pinia-全局状态管理工具" class="headerlink" title="集成 Pinia 全局状态管理工具"></a>集成 Pinia 全局状态管理工具</h2><h3 id="安装依赖-1"><a href="#安装依赖-1" class="headerlink" title="安装依赖"></a>安装依赖</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i pinia</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="创建仓库配置文件"><a href="#创建仓库配置文件" class="headerlink" title="创建仓库配置文件"></a>创建仓库配置文件</h3><p>在 <code>src/store</code> 目录下新建 <code>index.js</code> 文件与 <code>modules</code> 文件夹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">└── src/</span><br><span class="line">    ├── store/</span><br><span class="line">    	├── modules/  // 仓库模块</span><br><span class="line">        ├── index.js  // 仓库配置文件</span><br><span class="line">复制代码</span><br><span class="line">import &#123; defineStore &#125; from &#x27;pinia&#x27;;</span><br><span class="line"></span><br><span class="line">export const useCounterStore = defineStore(&#x27;counter&#x27;, &#123;</span><br><span class="line">  state: () =&gt; (&#123;</span><br><span class="line">    count: 1,</span><br><span class="line">  &#125;),</span><br><span class="line">  actions: &#123;</span><br><span class="line">    accumulate() &#123;</span><br><span class="line">      this.count++;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br><span class="line">import &#123; createPinia &#125; from &#x27;pinia&#x27;;</span><br><span class="line"></span><br><span class="line">const store = createPinia();</span><br><span class="line"></span><br><span class="line">export default store;</span><br><span class="line"></span><br><span class="line">export * from &#x27;./modules/counter&#x27;;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>开发中需要将不同功能所对应的状态，拆分到不同的 <code>modules</code>，好处如同路由模块一样。</p>
<h3 id="挂载-Pinia-配置"><a href="#挂载-Pinia-配置" class="headerlink" title="挂载 Pinia 配置"></a>挂载 Pinia 配置</h3><p>在 <code>main.js</code> 文件中挂载 <code>Vuex</code> 配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createApp &#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">import App from &#x27;./App.vue&#x27;;</span><br><span class="line">import store from &#x27;./store&#x27;;</span><br><span class="line">import router from &#x27;./router&#x27;;</span><br><span class="line"></span><br><span class="line">createApp(App).use(router).use(store).mount(&#x27;#app&#x27;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h2 id="集成-TDesign-Vue-Next-组件库"><a href="#集成-TDesign-Vue-Next-组件库" class="headerlink" title="集成 TDesign Vue Next 组件库"></a>集成 TDesign Vue Next 组件库</h2><h3 id="安装依赖-2"><a href="#安装依赖-2" class="headerlink" title="安装依赖"></a>安装依赖</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i tdesign-vue-next</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="基础使用"><a href="#基础使用" class="headerlink" title="基础使用"></a>基础使用</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createApp &#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">import TDesign from &#x27;tdesign-vue-next&#x27;;</span><br><span class="line"></span><br><span class="line">// 引入组件库全局样式资源</span><br><span class="line">import &#x27;tdesign-vue-next/es/style/index.css&#x27;;</span><br><span class="line"></span><br><span class="line">const app = createApp(App);</span><br><span class="line">app.use(TDesign);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="按需引入"><a href="#按需引入" class="headerlink" title="按需引入"></a>按需引入</h3><p>使用 <code>unplugin-vue-components</code> 和 <code>unplugin-auto-import</code> 来实现自动导入：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install unplugin-vue-components unplugin-auto-import -D</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>在 Vite 对应的配置文件 <code>vite.config.js</code> 添加上述插件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import AutoImport from &#x27;unplugin-auto-import/vite&#x27;;</span><br><span class="line">import Components from &#x27;unplugin-vue-components/vite&#x27;;</span><br><span class="line">import &#123; TDesignResolver &#125; from &#x27;unplugin-vue-components/resolvers&#x27;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  plugins: [</span><br><span class="line">    AutoImport(&#123;</span><br><span class="line">      resolvers: [TDesignResolver(&#123;</span><br><span class="line">        library: &#x27;vue-next&#x27;</span><br><span class="line">      &#125;)],</span><br><span class="line">    &#125;),</span><br><span class="line">    Components(&#123;</span><br><span class="line">      resolvers: [TDesignResolver(&#123;</span><br><span class="line">        library: &#x27;vue-next&#x27;</span><br><span class="line">      &#125;)],</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h2 id="集成-Axios-HTTP-工具"><a href="#集成-Axios-HTTP-工具" class="headerlink" title="集成 Axios HTTP 工具"></a>集成 Axios HTTP 工具</h2><h3 id="安装依赖-3"><a href="#安装依赖-3" class="headerlink" title="安装依赖"></a>安装依赖</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i axios</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="请求配置"><a href="#请求配置" class="headerlink" title="请求配置"></a>请求配置</h3><p>在 <code>utils</code> 目录下创建 <code>request.js</code> 文件，配置好适合自己业务的请求拦截和响应拦截：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line">└── src/</span><br><span class="line">	├── api  // 接口</span><br><span class="line">    ├── utils/</span><br><span class="line">        ├── request.js  // axios 请求库二次封装</span><br><span class="line">复制代码</span><br><span class="line">import axios from &#x27;axios&#x27;;</span><br><span class="line"></span><br><span class="line">// 创建请求实例</span><br><span class="line">const instance = axios.create(&#123;</span><br><span class="line">  baseURL: &#x27;/api&#x27;,</span><br><span class="line">  // 指定请求超时的毫秒数</span><br><span class="line">  timeout: 1000,</span><br><span class="line">  // 表示跨域请求时是否需要使用凭证</span><br><span class="line">  withCredentials: false,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 前置拦截器（发起请求之前的拦截）</span><br><span class="line">instance.interceptors.request.use(</span><br><span class="line">  (config) =&gt; &#123;</span><br><span class="line">    /**</span><br><span class="line">     * 在这里一般会携带前台的参数发送给后台，比如下面这段代码：</span><br><span class="line">     * const token = getToken()</span><br><span class="line">     * if (token) &#123;</span><br><span class="line">     *  config.headers.token = token</span><br><span class="line">     * &#125;</span><br><span class="line">     */</span><br><span class="line">    return config;</span><br><span class="line">  &#125;,</span><br><span class="line">  (error) =&gt; &#123;</span><br><span class="line">    return Promise.reject(error);</span><br><span class="line">  &#125;,</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">// 后置拦截器（获取到响应时的拦截）</span><br><span class="line">instance.interceptors.response.use(</span><br><span class="line">  (response) =&gt; &#123;</span><br><span class="line">    /**</span><br><span class="line">     * 根据你的项目实际情况来对 response 和 error 做处理</span><br><span class="line">     * 这里对 response 和 error 不做任何处理，直接返回</span><br><span class="line">     */</span><br><span class="line">    return response;</span><br><span class="line">  &#125;,</span><br><span class="line">  (error) =&gt; &#123;</span><br><span class="line">    const &#123; response &#125; = error;</span><br><span class="line">    if (response &amp;&amp; response.data) &#123;</span><br><span class="line">      return Promise.reject(error);</span><br><span class="line">    &#125;</span><br><span class="line">    const &#123; message &#125; = error;</span><br><span class="line">    console.error(message);</span><br><span class="line">    return Promise.reject(error);</span><br><span class="line">  &#125;,</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">// 导出常用函数</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @param &#123;string&#125; url</span><br><span class="line"> * @param &#123;object&#125; data</span><br><span class="line"> * @param &#123;object&#125; params</span><br><span class="line"> */</span><br><span class="line">export function post(url, data = &#123;&#125;, params = &#123;&#125;) &#123;</span><br><span class="line">  return instance(&#123;</span><br><span class="line">    method: &#x27;post&#x27;,</span><br><span class="line">    url,</span><br><span class="line">    data,</span><br><span class="line">    params,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @param &#123;string&#125; url</span><br><span class="line"> * @param &#123;object&#125; params</span><br><span class="line"> */</span><br><span class="line">export function get(url, params = &#123;&#125;) &#123;</span><br><span class="line">  return instance(&#123;</span><br><span class="line">    method: &#x27;get&#x27;,</span><br><span class="line">    url,</span><br><span class="line">    params,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @param &#123;string&#125; url</span><br><span class="line"> * @param &#123;object&#125; data</span><br><span class="line"> * @param &#123;object&#125; params</span><br><span class="line"> */</span><br><span class="line">export function put(url, data = &#123;&#125;, params = &#123;&#125;) &#123;</span><br><span class="line">  return instance(&#123;</span><br><span class="line">    method: &#x27;put&#x27;,</span><br><span class="line">    url,</span><br><span class="line">    params,</span><br><span class="line">    data,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @param &#123;string&#125; url</span><br><span class="line"> * @param &#123;object&#125; params</span><br><span class="line"> */</span><br><span class="line">export function _delete(url, params = &#123;&#125;) &#123;</span><br><span class="line">  return instance(&#123;</span><br><span class="line">    method: &#x27;delete&#x27;,</span><br><span class="line">    url,</span><br><span class="line">    params,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default instance;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>之后在 <code>api</code> 文件夹中以业务模型对接口进行拆分，举个例子，将所有跟用户相关接口封装在 <code>User</code> 类中，此类称作用户模型。</p>
<p>在 <code>User</code> 类中比如有登录、注册、获取用户信息等方法，如果有业务逻辑变动，只需要修改相关方法即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import &#123; post &#125; from &#x27;@/utils/request&#x27;;</span><br><span class="line"></span><br><span class="line">export default class User &#123;</span><br><span class="line">  /**</span><br><span class="line">   * 登录</span><br><span class="line">   * @param &#123;String&#125; username 用户名</span><br><span class="line">   * @param &#123;String&#125; password 密码</span><br><span class="line">   * @returns</span><br><span class="line">   */</span><br><span class="line">  static async login(username, password) &#123;</span><br><span class="line">    return post(&#x27;/login&#x27;, &#123;</span><br><span class="line">      username,</span><br><span class="line">      password,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>把每个业务模型独立成一个 js 文件，声明一个类通过其属性和方法来实现这个模型相关的数据获取，这样可以大大提升代码的可读性与可维护性。</p>
<h3 id="模拟演示"><a href="#模拟演示" class="headerlink" title="模拟演示"></a>模拟演示</h3><p>在需要使用接口的地方，引入对应的业务模型文件，参考如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import User from &#x27;@/api/user&#x27;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      username: &#x27;&#x27;,</span><br><span class="line">      password: &#x27;&#x27;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    async login() &#123;</span><br><span class="line">      const res = await User.login(this.username, this.password);</span><br><span class="line">      console.log(res);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h2 id="集成-CSS-预处理器-Less"><a href="#集成-CSS-预处理器-Less" class="headerlink" title="集成 CSS 预处理器 Less"></a>集成 CSS 预处理器 Less</h2><p>本项目使用 CSS 预处理器 Less，直接安装为开发依赖即可。</p>
<p>Vite 内部已帮我们集成了相关的 <code>loader</code>，不需要额外配置。</p>
<h3 id="安装依赖-4"><a href="#安装依赖-4" class="headerlink" title="安装依赖"></a>安装依赖</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i less -D</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h3><p>在 <code>&lt;style&gt;&lt;/style&gt;</code> 样式标签中引用 <code>lang=&quot;less&quot;</code> 即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;style lang=&quot;less&quot;&gt;&lt;/style&gt;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<blockquote>
<p>CSS 命名规范推荐 BEM 命名规范</p>
<p>参考链接：<strong>CSS BEM 书写规范</strong>[21]</p>
</blockquote>
<h3 id="全局样式"><a href="#全局样式" class="headerlink" title="全局样式"></a>全局样式</h3><p>在 <code>src/style</code> 目录下创建 <code>variables.less</code> 全局样式文件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">└── src/</span><br><span class="line">    ├── style/</span><br><span class="line">        ├── variables.less  // 全局样式文件</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>在 <code>vite.config.js</code> 配置文件中新增 CSS 预处理器相关配置即可实现 less 全局样式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import &#123; resolve &#125; from &#x27;path&#x27;;</span><br><span class="line"></span><br><span class="line">export default defineConfig(&#123;</span><br><span class="line">    css: &#123;</span><br><span class="line">      preprocessorOptions: &#123;</span><br><span class="line">        less: &#123;</span><br><span class="line">          modifyVars: &#123;</span><br><span class="line">            hack: `true; @import (reference) &quot;$&#123;resolve(&#x27;src/style/variables.less&#x27;)&#125;&quot;;`,</span><br><span class="line">          &#125;,</span><br><span class="line">          math: &#x27;strict&#x27;,</span><br><span class="line">          javascriptEnabled: true,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="样式穿透"><a href="#样式穿透" class="headerlink" title="样式穿透"></a>样式穿透</h3><p><strong>官方文档</strong>[22]</p>
<p>在 Vue3 中，改变了以往样式穿透的语法，如果继续使用 <code>::v-deep</code>、<code>/deep/</code>、<code>&gt;&gt;&gt;</code> 等语法的话，会出现一个警告，下面是新的语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">/* 深度选择器 */</span><br><span class="line">:deep(selector) &#123;</span><br><span class="line">  /* ... */</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 插槽选择器 */</span><br><span class="line">:slotted(selector) &#123;</span><br><span class="line">  /* ... */</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 全局选择器 */</span><br><span class="line">:global(selector) &#123;</span><br><span class="line">  /* ... */</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>至此，一个基于 JavaScript + Vite3 + Vue3 + Vue Router + Pinia + Axios + Less 的前端项目开发环境搭建完毕。</p>
<p>项目托管在 <strong>GitHub 仓库</strong>[23]，需要的同学可以去下载下来，参考学习。</p>
<p>接下来增加代码规范约束、提交规范约束、单元测试、自动部署等，让其更完善、更健壮。</p>
<h1 id="代码规范"><a href="#代码规范" class="headerlink" title="代码规范"></a>代码规范</h1><p>随着前端应用逐渐变得大型化和复杂化，在同一个项目中有多个人员参与时，每个人的前端能力程度不等，他们往往会用不同的编码风格和习惯在项目中写代码，长此下去，势必会让项目的健壮性越来越差。解决这些问题，理论上讲，口头约定和代码审查都可以，但是这种方式无法实时反馈，而且沟通成本过高，不够灵活，更关键的是无法把控。不以规矩，不能成方圆，我们不得不在项目使用一些工具来约束代码规范。</p>
<p>本文讲解如何使用 <strong>EditorConfig + ESLint + Prettier + Stylelint</strong> 组合来实现代码规范化。</p>
<p>这样做带来好处：</p>
<ul>
<li>解决团队之间代码不规范导致的可读性差和可维护性差的问题。</li>
<li>解决团队成员不同编辑器导致的编码规范不统一问题。</li>
<li>提前发现代码风格问题，给出对应规范提示，及时修复。</li>
<li>减少代码审查过程中反反复复的修改过程，节约时间。</li>
<li>自动格式化，统一编码风格，从此和脏乱差的代码说再见。</li>
</ul>
<h2 id="集成-EditorConfig-配置"><a href="#集成-EditorConfig-配置" class="headerlink" title="集成 EditorConfig 配置"></a>集成 EditorConfig 配置</h2><p><strong>EditorConfig</strong>[24] 主要用于统一不同 IDE 编辑器的编码风格。</p>
<p>在项目根目录下添加 <code>.editorconfig</code> 文件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># 表示是最顶层的 EditorConfig 配置文件</span><br><span class="line">root = true</span><br><span class="line"></span><br><span class="line"># 表示所有文件适用</span><br><span class="line">[*]</span><br><span class="line"># 缩进风格（tab | space）</span><br><span class="line">indent_style = space</span><br><span class="line"># 控制换行类型(lf | cr | crlf)</span><br><span class="line">end_of_line = lf</span><br><span class="line"># 设置文件字符集为 utf-8</span><br><span class="line">charset = utf-8</span><br><span class="line"># 去除行首的任意空白字符</span><br><span class="line">trim_trailing_whitespace = true</span><br><span class="line"># 始终在文件末尾插入一个新行</span><br><span class="line">insert_final_newline = true</span><br><span class="line"></span><br><span class="line"># 表示仅 md 文件适用以下规则</span><br><span class="line">[*.md]</span><br><span class="line">max_line_length = off</span><br><span class="line">trim_trailing_whitespace = false</span><br><span class="line"></span><br><span class="line"># 表示仅 ts、js、vue、css 文件适用以下规则</span><br><span class="line">[*.&#123;ts,js,vue,css&#125;]</span><br><span class="line">indent_size = 2</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<blockquote>
<p>很多 IDE 中会默认支持此配置，但是也有些不支持，如：VSCode、Atom、Sublime Text 等。</p>
<p>具体列表可以参考官网，如果在 VSCode 中使用需要安装 <code>EditorConfig for VS Code</code> 插件。</p>
</blockquote>
<p>EditorConfig for VS Code</p>
<h2 id="集成-ESLint-配置"><a href="#集成-ESLint-配置" class="headerlink" title="集成 ESLint 配置"></a>集成 ESLint 配置</h2><p><strong>ESLint</strong>[25] 是针对 EScript 的一款代码检测工具，它可以检测项目中编写不规范的代码，如果写出不符合规范的代码会被警告。</p>
<p>由此我们就可以借助于 ESLint 强大的功能来统一团队的编码规范。</p>
<h3 id="安装依赖-5"><a href="#安装依赖-5" class="headerlink" title="安装依赖"></a>安装依赖</h3><ul>
<li><strong><code>ESLint</code></strong>[26] - ESLint 本体</li>
<li><strong><code>eslint-define-config</code></strong>[27] - 改善 ESLint 规范编写体验</li>
<li><strong><code>eslint-plugin-vue</code></strong>[28] - 适用于 Vue 文件的 ESLint 插件</li>
<li><strong><code>eslint-config-airbnb-base</code></strong>[29] - Airbnb JavaScript 风格指南</li>
<li><strong><code>eslint-plugin-import</code></strong>[30] - 使用 <code>eslint-config-airbnb-base</code> 时必须安装的前置插件</li>
<li><strong><code>vue-eslint-parser</code></strong>[31] - 使用 <code>eslint-plugin-vue</code> 时必须安装的 ESLint 解析器</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i eslint eslint-define-config eslint-config-airbnb-base eslint-plugin-import eslint-plugin-vue vue-eslint-parser -D</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h3><p>Visual Studio Code 编辑器使用 <code>ESLint</code> 配置需要下载插件 <strong>ESLint</strong> 。</p>
<p>ESLint</p>
<p>JetBrains 系列编辑器（WebStorm、IntelliJ IDEA 等）则不用额外安装插件。</p>
<h3 id="创建-ESLint-配置文件"><a href="#创建-ESLint-配置文件" class="headerlink" title="创建 ESLint 配置文件"></a>创建 ESLint 配置文件</h3><p>在项目根目录创建 <code>.eslintrc.js</code> 文件，并填入以下内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line">const &#123; defineConfig &#125; = require(&#x27;eslint-define-config&#x27;);</span><br><span class="line"></span><br><span class="line">module.exports = defineConfig(&#123;</span><br><span class="line">  root: true,</span><br><span class="line">  env: &#123;</span><br><span class="line">    browser: true,</span><br><span class="line">    node: true,</span><br><span class="line">    jest: true,</span><br><span class="line">    es6: true,</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [&#x27;vue&#x27;],</span><br><span class="line">  parser: &#x27;vue-eslint-parser&#x27;,</span><br><span class="line">  parserOptions: &#123;</span><br><span class="line">    ecmaVersion: &#x27;latest&#x27;,</span><br><span class="line">    sourceType: &#x27;module&#x27;,</span><br><span class="line">    allowImportExportEverywhere: true,</span><br><span class="line">    ecmaFeatures: &#123;</span><br><span class="line">      jsx: true,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  extends: [</span><br><span class="line">    &#x27;airbnb-base&#x27;,</span><br><span class="line">    &#x27;eslint:recommended&#x27;,</span><br><span class="line">    &#x27;plugin:vue/vue3-essential&#x27;,</span><br><span class="line">    &#x27;plugin:vue/vue3-recommended&#x27;,</span><br><span class="line">    &#x27;plugin:prettier/recommended&#x27;,</span><br><span class="line">  ],</span><br><span class="line">  rules: &#123;</span><br><span class="line">    // 禁止使用多余的包</span><br><span class="line">    &#x27;import/no-extraneous-dependencies&#x27;: 0,</span><br><span class="line">    // 确保在导入路径内一致使用文件扩展名</span><br><span class="line">    &#x27;import/extensions&#x27;: 0,</span><br><span class="line">    // 确保导入指向可以解析的文件/模块</span><br><span class="line">    &#x27;import/no-unresolved&#x27;: 0,</span><br><span class="line">    // 首选默认导出导入/首选默认导出</span><br><span class="line">    &#x27;import/prefer-default-export&#x27;: 0,</span><br><span class="line">    // 要求使用 let 或 const 而不是 var</span><br><span class="line">    &#x27;no-var&#x27;: &#x27;error&#x27;,</span><br><span class="line">    // 禁止使用 new 以避免产生副作用</span><br><span class="line">    &#x27;no-new&#x27;: 1,</span><br><span class="line">    // 禁止变量声明与外层作用域的变量同名</span><br><span class="line">    &#x27;no-shadow&#x27;: 0,</span><br><span class="line">    // 禁用 console</span><br><span class="line">    &#x27;no-console&#x27;: 0,</span><br><span class="line">    // 禁止标识符中有悬空下划线</span><br><span class="line">    &#x27;no-underscore-dangle&#x27;: 0,</span><br><span class="line">    // 禁止在可能与比较操作符相混淆的地方使用箭头函数</span><br><span class="line">    &#x27;no-confusing-arrow&#x27;: 0,</span><br><span class="line">    // 禁用一元操作符 ++ 和 --</span><br><span class="line">    &#x27;no-plusplus&#x27;: 0,</span><br><span class="line">    // 禁止对 function 的参数进行重新赋值</span><br><span class="line">    &#x27;no-param-reassign&#x27;: 0,</span><br><span class="line">    // 禁用特定的语法</span><br><span class="line">    &#x27;no-restricted-syntax&#x27;: 0,</span><br><span class="line">    // 禁止在变量定义之前使用它们</span><br><span class="line">    &#x27;no-use-before-define&#x27;: 0,</span><br><span class="line">    // 禁止直接调用 Object.prototypes 的内置属性</span><br><span class="line">    &#x27;no-prototype-builtins&#x27;: 0,</span><br><span class="line">    // 禁止可以在有更简单的可替代的表达式时使用三元操作符</span><br><span class="line">    &#x27;no-unneeded-ternary&#x27;: &#x27;error&#x27;,</span><br><span class="line">    // 禁止重复模块导入</span><br><span class="line">    &#x27;no-duplicate-imports&#x27;: &#x27;error&#x27;,</span><br><span class="line">    // 禁止在对象中使用不必要的计算属性</span><br><span class="line">    &#x27;no-useless-computed-key&#x27;: &#x27;error&#x27;,</span><br><span class="line">    // 强制使用一致的缩进</span><br><span class="line">    indent: [&#x27;error&#x27;, 2],</span><br><span class="line">    // 强制使用骆驼拼写法命名约定</span><br><span class="line">    camelcase: 0,</span><br><span class="line">    // 强制类方法使用 this</span><br><span class="line">    &#x27;class-methods-use-this&#x27;: 0,</span><br><span class="line">    // 要求构造函数首字母大写</span><br><span class="line">    &#x27;new-cap&#x27;: 0,</span><br><span class="line">    // 强制一致地使用 function 声明或表达式</span><br><span class="line">    &#x27;func-style&#x27;: 0,</span><br><span class="line">    // 强制一行的最大长度</span><br><span class="line">    &#x27;max-len&#x27;: 0,</span><br><span class="line">    // 要求 return 语句要么总是指定返回的值，要么不指定</span><br><span class="line">    &#x27;consistent-return&#x27;: 0,</span><br><span class="line">    // 强制switch要有default分支</span><br><span class="line">    &#x27;default-case&#x27;: 2,</span><br><span class="line">    // 强制剩余和扩展运算符及其表达式之间有空格</span><br><span class="line">    &#x27;rest-spread-spacing&#x27;: &#x27;error&#x27;,</span><br><span class="line">    // 要求使用 const 声明那些声明后不再被修改的变量</span><br><span class="line">    &#x27;prefer-const&#x27;: &#x27;error&#x27;,</span><br><span class="line">    // 强制箭头函数的箭头前后使用一致的空格</span><br><span class="line">    &#x27;arrow-spacing&#x27;: &#x27;error&#x27;,</span><br><span class="line">  &#125;,</span><br><span class="line">    overrides: [</span><br><span class="line">    &#123;</span><br><span class="line">      files: [&#x27;*.vue&#x27;],</span><br><span class="line">      rules: &#123;</span><br><span class="line">        // 要求组件名称总是多个单词</span><br><span class="line">        &#x27;vue/multi-word-component-names&#x27;: 0,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<blockquote>
<p>关于更多配置项信息，请前往 ESLint 官网查看 <strong>ESLint-Configuring</strong>[32]</p>
</blockquote>
<h3 id="创建-ESLint-过滤规则"><a href="#创建-ESLint-过滤规则" class="headerlink" title="创建 ESLint 过滤规则"></a>创建 ESLint 过滤规则</h3><p>在项目根目录添加一个 <code>.eslintignore</code> 文件，内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dist</span><br><span class="line">node_modules</span><br><span class="line">!.prettierrc.js</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h2 id="集成-Prettier-配置"><a href="#集成-Prettier-配置" class="headerlink" title="集成 Prettier 配置"></a>集成 Prettier 配置</h2><p><strong>Prettier</strong>[33] 是一款强大的代码格式化工具，支持 JavaScript、TypeScript、CSS、SCSS、Less、JSX、Angular、Vue、GraphQL、JSON、Markdown 等语言，基本上前端能用到的文件格式它都可以搞定，是当下最流行的代码格式化工具。</p>
<h3 id="安装依赖-6"><a href="#安装依赖-6" class="headerlink" title="安装依赖"></a>安装依赖</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i prettier -D</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="安装插件-1"><a href="#安装插件-1" class="headerlink" title="安装插件"></a>安装插件</h3><p>Visual Studio Code 编辑器使用 <code>Prettier</code> 配置需要下载插件 <strong>Prettier - Code formatter</strong> 。</p>
<p>Prettier - Code formatter</p>
<p>JetBrains 系列编辑器（WebStorm、IntelliJ IDEA 等）则不用额外安装插件，可直接使用 <code>Prettier</code> 配置。</p>
<h3 id="创建-Prettier-配置文件"><a href="#创建-Prettier-配置文件" class="headerlink" title="创建 Prettier 配置文件"></a>创建 Prettier 配置文件</h3><p>Prettier 支持多种格式的<strong>配置文件</strong>[34]，比如 <code>.json</code>、<code>.yml</code>、<code>.yaml</code>、<code>.js</code>等。</p>
<p>在项目根目录创建 <code>.prettierrc.js</code> 文件，并填入以下内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  // 一行最多 120 字符</span><br><span class="line">  printWidth: 120,</span><br><span class="line">  // 使用 2 个空格缩进</span><br><span class="line">  tabWidth: 2,</span><br><span class="line">  // 不使用缩进符，而使用空格</span><br><span class="line">  useTabs: false,</span><br><span class="line">  // 行尾需要有分号</span><br><span class="line">  semi: true,</span><br><span class="line">  // 使用单引号</span><br><span class="line">  singleQuote: true,</span><br><span class="line">  // 对象的 key 仅在必要时用引号</span><br><span class="line">  quoteProps: &#x27;as-needed&#x27;,</span><br><span class="line">  // jsx 不使用单引号，而使用双引号</span><br><span class="line">  jsxSingleQuote: false,</span><br><span class="line">  // 末尾需要有逗号</span><br><span class="line">  trailingComma: &#x27;all&#x27;,</span><br><span class="line">  // 大括号内的首尾需要空格</span><br><span class="line">  bracketSpacing: true,</span><br><span class="line">  // jsx 标签的反尖括号需要换行</span><br><span class="line">  jsxBracketSameLine: false,</span><br><span class="line">  // 箭头函数，只有一个参数的时候，也需要括号</span><br><span class="line">  arrowParens: &#x27;always&#x27;,</span><br><span class="line">  // 每个文件格式化的范围是文件的全部内容</span><br><span class="line">  rangeStart: 0,</span><br><span class="line">  rangeEnd: Infinity,</span><br><span class="line">  // 不需要写文件开头的 @prettier</span><br><span class="line">  requirePragma: false,</span><br><span class="line">  // 不需要自动在文件开头插入 @prettier</span><br><span class="line">  insertPragma: false,</span><br><span class="line">  // 使用默认的折行标准</span><br><span class="line">  proseWrap: &#x27;preserve&#x27;,</span><br><span class="line">  // 根据显示样式决定 html 要不要折行</span><br><span class="line">  htmlWhitespaceSensitivity: &#x27;css&#x27;,</span><br><span class="line">  // vue 文件中的 script 和 style 内不用缩进</span><br><span class="line">  vueIndentScriptAndStyle: false,</span><br><span class="line">  // 换行符使用 lf</span><br><span class="line">  endOfLine: &#x27;lf&#x27;,</span><br><span class="line">  // 格式化嵌入的内容</span><br><span class="line">  embeddedLanguageFormatting: &#x27;auto&#x27;,</span><br><span class="line">  // html, vue, jsx 中每个属性占一行</span><br><span class="line">  singleAttributePerLine: false,</span><br><span class="line">&#125;;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<blockquote>
<p>关于更多配置项信息，请前往 Prettier 官网查看 <strong>Prettier-Options</strong>[35]</p>
</blockquote>
<h3 id="创建-Prettier-过滤规则"><a href="#创建-Prettier-过滤规则" class="headerlink" title="创建 Prettier 过滤规则"></a>创建 Prettier 过滤规则</h3><p>在项目根目录添加一个 <code>.prettierignore</code> 文件，内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">## OS</span><br><span class="line">.DS_Store</span><br><span class="line">.idea</span><br><span class="line">.editorconfig</span><br><span class="line">pnpm-lock.yaml</span><br><span class="line">.npmrc</span><br><span class="line"></span><br><span class="line"># Ignored suffix</span><br><span class="line">*.log</span><br><span class="line">*.md</span><br><span class="line">*.svg</span><br><span class="line">*.png</span><br><span class="line">*.ico</span><br><span class="line">*ignore</span><br><span class="line"></span><br><span class="line">## Local</span><br><span class="line">.husky</span><br><span class="line"></span><br><span class="line">## Built-files</span><br><span class="line">.cache</span><br><span class="line">dist</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h2 id="解决-Prettier-和-ESLint-冲突"><a href="#解决-Prettier-和-ESLint-冲突" class="headerlink" title="解决 Prettier 和 ESLint 冲突"></a>解决 Prettier 和 ESLint 冲突</h2><p>本项目中的 ESLint 配置使用了 Airbnb JavaScript 风格指南校验，其规则之一是<em>代码结束后面要加分号</em>，而在 Prettier 配置文件中加了<em>代码结束后面不加分号</em>配置项，从而冲突了。</p>
<p>解决两者冲突问题，需要用到 <strong>eslint-plugin-prettier</strong> 和 <strong>eslint-config-prettier</strong>。</p>
<ul>
<li><code>eslint-plugin-prettier</code> 将 Prettier 的规则设置到 ESLint 的规则中</li>
<li><code>eslint-config-prettier</code> 关闭 ESLint 中与 Prettier 中会发生冲突的规则</li>
</ul>
<p>最后形成优先级：<code>Prettier 配置规则</code> &gt; <code>ESLint 配置规则</code></p>
<h3 id="安装依赖-7"><a href="#安装依赖-7" class="headerlink" title="安装依赖"></a>安装依赖</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i eslint-plugin-prettier eslint-config-prettier -D</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="修改-ESLint-配置文件"><a href="#修改-ESLint-配置文件" class="headerlink" title="修改 ESLint 配置文件"></a>修改 ESLint 配置文件</h3><p>修改 <code>.eslintrc.js</code> 文件，在 <code>extends</code> 中添加 <code>plugin:prettier/recommended</code> 规则（此规则一定要加在最后）。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  extends: [</span><br><span class="line">    &#x27;airbnb-base&#x27;,</span><br><span class="line">    &#x27;eslint:recommended&#x27;,</span><br><span class="line">    &#x27;plugin:vue/vue3-essential&#x27;,</span><br><span class="line">    &#x27;plugin:vue/vue3-recommended&#x27;,</span><br><span class="line">    &#x27;plugin:prettier/recommended&#x27;</span><br><span class="line">  ],</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h2 id="自动格式化代码"><a href="#自动格式化代码" class="headerlink" title="自动格式化代码"></a>自动格式化代码</h2><p>Visual Studio Code 在 <code>settings.json</code> 设置文件中，增加以下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;editor.codeActionsOnSave&quot;: &#123;</span><br><span class="line">    &quot;source.fixAll&quot;: true,</span><br><span class="line">    &quot;source.fixAll.eslint&quot;: true</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>WebStorm 打开设置窗口，按如下操作，最后点击 <code>Apply</code> -&gt; <code>OK</code>：</p>
<p>WebStorm</p>
<h2 id="集成-Stylelint-配置"><a href="#集成-Stylelint-配置" class="headerlink" title="集成 Stylelint 配置"></a>集成 Stylelint 配置</h2><p>Stylelint 是一个强大、先进的 CSS 代码检查器（linter），可以帮助你规避 CSS 代码中的错误并保持一致的编码风格。</p>
<h3 id="安装依赖-8"><a href="#安装依赖-8" class="headerlink" title="安装依赖"></a>安装依赖</h3><ul>
<li><strong><code>Stylelint</code></strong>[36] - Stylelint 本体</li>
<li><strong><code>stylelint-config-prettier</code></strong>[37] - 关闭 Stylelint 中与 Prettier 中会发生冲突的规则</li>
<li><strong><code>stylelint-config-standard</code></strong>[38] - Stylelint 官方推荐规则</li>
<li><strong><code>stylelint-config-recommended-vue</code></strong>[39] - 检验 vue 文件中的样式</li>
<li><strong><code>stylelint-order</code></strong>[40] - CSS 属性顺序规则插件</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i stylelint stylelint-config-prettier stylelint-config-standard stylelint-config-recommended-vue stylelint-order -D</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="安装插件-2"><a href="#安装插件-2" class="headerlink" title="安装插件"></a>安装插件</h3><p>Visual Studio Code 编辑器使用 <code>Stylelint</code> 配置需要下载插件 <strong>Stylelint</strong> 。</p>
<p>Stylelint</p>
<p>JetBrains 系列编辑器（WebStorm、IntelliJ IDEA 等）则不用额外安装插件。</p>
<h3 id="创建-Stylelint-配置文件"><a href="#创建-Stylelint-配置文件" class="headerlink" title="创建 Stylelint 配置文件"></a>创建 Stylelint 配置文件</h3><p>在项目根目录创建 <code>.stylelintrc.js</code> 文件，并填入以下内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  root: true,</span><br><span class="line">  defaultSeverity: &#x27;error&#x27;,</span><br><span class="line">  extends: [</span><br><span class="line">    &#x27;stylelint-config-standard&#x27;,</span><br><span class="line">    &#x27;stylelint-config-prettier&#x27;</span><br><span class="line">  ],</span><br><span class="line">  plugins: [&#x27;stylelint-order&#x27;],</span><br><span class="line">  rules: &#123;</span><br><span class="line">    // 不允许未知函数</span><br><span class="line">    &#x27;function-no-unknown&#x27;: null,</span><br><span class="line">    // 指定类选择器的模式</span><br><span class="line">    &#x27;selector-class-pattern&#x27;: null,</span><br><span class="line">    // 禁止空源码</span><br><span class="line">    &#x27;no-empty-source&#x27;: null,</span><br><span class="line">    // 指定字符串使用单引号</span><br><span class="line">    &#x27;string-quotes&#x27;: &#x27;single&#x27;,</span><br><span class="line">    // 禁止未知的@规则</span><br><span class="line">    &#x27;at-rule-no-unknown&#x27;: [</span><br><span class="line">      true,</span><br><span class="line">      &#123;</span><br><span class="line">        ignoreAtRules: [</span><br><span class="line">          &#x27;tailwind&#x27;,</span><br><span class="line">          &#x27;apply&#x27;,</span><br><span class="line">          &#x27;variants&#x27;,</span><br><span class="line">          &#x27;responsive&#x27;,</span><br><span class="line">          &#x27;screen&#x27;,</span><br><span class="line">          &#x27;function&#x27;,</span><br><span class="line">          &#x27;if&#x27;,</span><br><span class="line">          &#x27;each&#x27;,</span><br><span class="line">          &#x27;include&#x27;,</span><br><span class="line">          &#x27;mixin&#x27;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">    // 指定@规则名的大小写</span><br><span class="line">    &#x27;at-rule-name-case&#x27;: &#x27;lower&#x27;,</span><br><span class="line">    // 指定缩进</span><br><span class="line">    indentation: [</span><br><span class="line">      2,</span><br><span class="line">      &#123;</span><br><span class="line">        severity: &#x27;warning&#x27;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">    // 禁止未知的伪类选择器</span><br><span class="line">    &#x27;selector-pseudo-class-no-unknown&#x27;: [</span><br><span class="line">      true,</span><br><span class="line">      &#123;</span><br><span class="line">        ignorePseudoClasses: [&#x27;global&#x27;],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">    // 禁止未知的伪元素选择器</span><br><span class="line">    &#x27;selector-pseudo-element-no-unknown&#x27;: [</span><br><span class="line">      true,</span><br><span class="line">      &#123;</span><br><span class="line">        ignorePseudoElements: [&#x27;v-deep&#x27;],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">    &#x27;order/properties-order&#x27;: [</span><br><span class="line">      &#x27;position&#x27;,</span><br><span class="line">      &#x27;top&#x27;,</span><br><span class="line">      &#x27;right&#x27;,</span><br><span class="line">      &#x27;bottom&#x27;,</span><br><span class="line">      &#x27;left&#x27;,</span><br><span class="line">      &#x27;z-index&#x27;,</span><br><span class="line">      &#x27;display&#x27;,</span><br><span class="line">      &#x27;justify-content&#x27;,</span><br><span class="line">      &#x27;align-items&#x27;,</span><br><span class="line">      &#x27;float&#x27;,</span><br><span class="line">      &#x27;clear&#x27;,</span><br><span class="line">      &#x27;overflow&#x27;,</span><br><span class="line">      &#x27;overflow-x&#x27;,</span><br><span class="line">      &#x27;overflow-y&#x27;,</span><br><span class="line">      &#x27;margin&#x27;,</span><br><span class="line">      &#x27;margin-top&#x27;,</span><br><span class="line">      &#x27;margin-right&#x27;,</span><br><span class="line">      &#x27;margin-bottom&#x27;,</span><br><span class="line">      &#x27;margin-left&#x27;,</span><br><span class="line">      &#x27;padding&#x27;,</span><br><span class="line">      &#x27;padding-top&#x27;,</span><br><span class="line">      &#x27;padding-right&#x27;,</span><br><span class="line">      &#x27;padding-bottom&#x27;,</span><br><span class="line">      &#x27;padding-left&#x27;,</span><br><span class="line">      &#x27;width&#x27;,</span><br><span class="line">      &#x27;min-width&#x27;,</span><br><span class="line">      &#x27;max-width&#x27;,</span><br><span class="line">      &#x27;height&#x27;,</span><br><span class="line">      &#x27;min-height&#x27;,</span><br><span class="line">      &#x27;max-height&#x27;,</span><br><span class="line">      &#x27;font-size&#x27;,</span><br><span class="line">      &#x27;font-family&#x27;,</span><br><span class="line">      &#x27;font-weight&#x27;,</span><br><span class="line">      &#x27;border&#x27;,</span><br><span class="line">      &#x27;border-style&#x27;,</span><br><span class="line">      &#x27;border-width&#x27;,</span><br><span class="line">      &#x27;border-color&#x27;,</span><br><span class="line">      &#x27;border-top&#x27;,</span><br><span class="line">      &#x27;border-top-style&#x27;,</span><br><span class="line">      &#x27;border-top-width&#x27;,</span><br><span class="line">      &#x27;border-top-color&#x27;,</span><br><span class="line">      &#x27;border-right&#x27;,</span><br><span class="line">      &#x27;border-right-style&#x27;,</span><br><span class="line">      &#x27;border-right-width&#x27;,</span><br><span class="line">      &#x27;border-right-color&#x27;,</span><br><span class="line">      &#x27;border-bottom&#x27;,</span><br><span class="line">      &#x27;border-bottom-style&#x27;,</span><br><span class="line">      &#x27;border-bottom-width&#x27;,</span><br><span class="line">      &#x27;border-bottom-color&#x27;,</span><br><span class="line">      &#x27;border-left&#x27;,</span><br><span class="line">      &#x27;border-left-style&#x27;,</span><br><span class="line">      &#x27;border-left-width&#x27;,</span><br><span class="line">      &#x27;border-left-color&#x27;,</span><br><span class="line">      &#x27;border-radius&#x27;,</span><br><span class="line">      &#x27;text-align&#x27;,</span><br><span class="line">      &#x27;text-justify&#x27;,</span><br><span class="line">      &#x27;text-indent&#x27;,</span><br><span class="line">      &#x27;text-overflow&#x27;,</span><br><span class="line">      &#x27;text-decoration&#x27;,</span><br><span class="line">      &#x27;white-space&#x27;,</span><br><span class="line">      &#x27;color&#x27;,</span><br><span class="line">      &#x27;background&#x27;,</span><br><span class="line">      &#x27;background-position&#x27;,</span><br><span class="line">      &#x27;background-repeat&#x27;,</span><br><span class="line">      &#x27;background-size&#x27;,</span><br><span class="line">      &#x27;background-color&#x27;,</span><br><span class="line">      &#x27;background-clip&#x27;,</span><br><span class="line">      &#x27;opacity&#x27;,</span><br><span class="line">      &#x27;filter&#x27;,</span><br><span class="line">      &#x27;list-style&#x27;,</span><br><span class="line">      &#x27;outline&#x27;,</span><br><span class="line">      &#x27;visibility&#x27;,</span><br><span class="line">      &#x27;box-shadow&#x27;,</span><br><span class="line">      &#x27;text-shadow&#x27;,</span><br><span class="line">      &#x27;resize&#x27;,</span><br><span class="line">      &#x27;transition&#x27;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="创建-Stylelint-过滤规则"><a href="#创建-Stylelint-过滤规则" class="headerlink" title="创建 Stylelint 过滤规则"></a>创建 Stylelint 过滤规则</h3><p>在项目根目录添加一个 <code>.stylelintignore</code> 文件，内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># .stylelintignore</span><br><span class="line"># 旧的不需打包的样式库</span><br><span class="line">*.min.css</span><br><span class="line"></span><br><span class="line"># 其他类型文件</span><br><span class="line">*.js</span><br><span class="line">*.jpg</span><br><span class="line">*.woff</span><br><span class="line"></span><br><span class="line"># 测试和打包目录</span><br><span class="line">/test/</span><br><span class="line">/dist/*</span><br><span class="line">/public/*</span><br><span class="line">public/*</span><br><span class="line">/node_modules/</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="启用-Vue-文件支持"><a href="#启用-Vue-文件支持" class="headerlink" title="启用 Vue 文件支持"></a>启用 Vue 文件支持</h3><p><code>Stylelint</code> v14 版本默认不支持 vue 文件中的 style 代码自动检测，详情查看<strong>官方迁移指南</strong>[41]</p>
<h4 id="安装依赖-9"><a href="#安装依赖-9" class="headerlink" title="安装依赖"></a>安装依赖</h4><ul>
<li><strong><code>stylelint-config-html</code></strong>[42] - 解析 vue 文件</li>
<li><strong><code>postcss-html</code></strong>[43] - 使用 <code>stylelint-config-html</code> 依赖的模块</li>
<li><strong><code>postcss-less</code></strong>[44] - 对 less 文件进行解析</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i stylelint-config-html postcss-html postcss-less -D</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h4 id="修改-Stylelint-配置文件"><a href="#修改-Stylelint-配置文件" class="headerlink" title="修改 Stylelint 配置文件"></a>修改 Stylelint 配置文件</h4><p>修改 <code>.stylelintrc.js</code> 文件，添加如下配置：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  overrides: [</span><br><span class="line">    &#123;</span><br><span class="line">      files: [&#x27;*.vue&#x27;, &#x27;**/*.vue&#x27;, &#x27;*.html&#x27;, &#x27;**/*.html&#x27;],</span><br><span class="line">      extends: [&#x27;stylelint-config-html&#x27;],</span><br><span class="line">      rules: &#123;</span><br><span class="line">        // 指定关键帧名称的模式</span><br><span class="line">        &#x27;keyframes-name-pattern&#x27;: null,</span><br><span class="line">        // 禁止未知的伪类选择器</span><br><span class="line">        &#x27;selector-pseudo-class-no-unknown&#x27;: [</span><br><span class="line">          true,</span><br><span class="line">          &#123;</span><br><span class="line">            ignorePseudoClasses: [&#x27;deep&#x27;, &#x27;global&#x27;],</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">        // 禁止未知的伪元素选择器</span><br><span class="line">        &#x27;selector-pseudo-element-no-unknown&#x27;: [</span><br><span class="line">          true,</span><br><span class="line">          &#123;</span><br><span class="line">            ignorePseudoElements: [&#x27;v-deep&#x27;, &#x27;v-global&#x27;, &#x27;v-slotted&#x27;],</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      files: [&#x27;*.less&#x27;, &#x27;**/*.less&#x27;],</span><br><span class="line">      customSyntax: &#x27;postcss-less&#x27;,</span><br><span class="line">      extends: [&#x27;stylelint-config-standard&#x27;, &#x27;stylelint-config-recommended-vue&#x27;],</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h4 id="修改-Visual-Studio-Code-工作区配置"><a href="#修改-Visual-Studio-Code-工作区配置" class="headerlink" title="修改 Visual Studio Code 工作区配置"></a>修改 Visual Studio Code 工作区配置</h4><p>Visual Studio Code 在 <code>settings.json</code> 设置文件中，增加以下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;stylelint.validate&quot;: [&quot;css&quot;, &quot;less&quot;, &quot;postcss&quot;, &quot;scss&quot;, &quot;vue&quot;, &quot;sass&quot;]</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h2 id="集成-husky-和-lint-staged"><a href="#集成-husky-和-lint-staged" class="headerlink" title="集成 husky 和 lint-staged"></a>集成 husky 和 lint-staged</h2><p>在项目中已集成 ESLint 和 Prettier，在编码时，这些工具可以对代码进行实时校验，在一定程度上能有效规范所写代码，但有些人可能觉得这些限制很麻烦，从而选择视“提示”而不见，依旧按自己编程风格来写代码，或者干脆禁用掉这些工具，开发完成就直接把代码提交到了仓库，日积月累，ESLint 也就形同虚设。</p>
<p>所以，还需要做一些限制，让没通过 ESLint 检测和修复的代码禁止提交，从而保证仓库代码都是符合规范的。</p>
<p>为了解决这个问题，需要用到 Git Hook，在本地执行 <code>git commit</code> 的时候，就对所提交的代码进行 ESLint 检测和修复（即执行 <code>eslint \--fix</code>），如果这些代码没通过 ESLint 规则校验，则禁止提交。</p>
<p>实现这一功能，需要借助 <strong>husky</strong>[45] + <strong>lint-staged</strong>[46] 。</p>
<h3 id="配置-husky"><a href="#配置-husky" class="headerlink" title="配置 husky"></a>配置 husky</h3><blockquote>
<p>注意：本项目使用 husky 6.x 版本，6.x 版本配置方式跟之前版本有较大差异，当发现配置方法不一致时，一切以 <strong>husky 官网</strong>[47]为准。</p>
</blockquote>
<p>使用 <code>husky-init</code> 命令快速在项目初始化 <code>husky</code> 配置：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 初始化仓库</span><br><span class="line">git init</span><br><span class="line"></span><br><span class="line"># 初始化</span><br><span class="line">npx husky-init</span><br><span class="line"></span><br><span class="line"># 安装依赖</span><br><span class="line">npm install</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>husky 包含很多 <code>hook</code>（钩子），常用有：<code>pre-commit</code>、<code>commit-msg</code>。</p>
<p>使用 <code>pre-commit</code> 来触发 ESLint 命令，修改 <code>.husky/pre-commit</code> 文件触发命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">eslint --fix ./src --ext .vue,.js,.ts</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p><code>pre-commit</code> hook 文件作用是：当执行 <code>git commit \-m &quot;xxx&quot;</code> 时，会先对 <code>src</code> 目录下所有的 <code>.vue</code>、<code>.js</code>、<code>.ts</code> 文件执行 <code>eslint \--fix</code> 命令，如果 ESLint 通过，成功 <code>commit</code>，否则终止 <code>commit</code>。</p>
<p>但是又存在一个问题：有时候明明只改动了一两个文件，却要对所有的文件执行 <code>eslint \--fix</code>。</p>
<p>假如这是一个历史项目，在中途配置了 ESLint 规则，那么在提交代码时，也会对其他未修改的“历史”文件都进行检查，可能会造成大量文件出现 ESLint 错误，显然这不是我们想要的结果。</p>
<p>所以只需要用 ESLint 修复此次写的代码，而不去影响其他的代码，此时需要借助 <strong>lint-staged</strong> 工具。</p>
<h3 id="配置-lint-staged"><a href="#配置-lint-staged" class="headerlink" title="配置 lint-staged"></a>配置 lint-staged</h3><p>lint-staged 一般结合 husky 来使用，它可以让 husky 的 <code>hook</code> 触发的命令只作用于 <code>git</code> 暂存区的文件，而不会影响到其他文件。</p>
<h4 id="安装依赖-10"><a href="#安装依赖-10" class="headerlink" title="安装依赖"></a>安装依赖</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i lint-staged -D</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h4 id="新增配置"><a href="#新增配置" class="headerlink" title="新增配置"></a>新增配置</h4><p>在 <code>package.json</code> 里增加 <code>lint-staged</code> 配置项：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;lint-staged&quot;: &#123;</span><br><span class="line">    &quot;*.&#123;js,jsx,ts,tsx&#125;&quot;: [</span><br><span class="line">      &quot;prettier --write&quot;,</span><br><span class="line">      &quot;eslint --fix&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;*.vue&quot;: [</span><br><span class="line">      &quot;prettier --write&quot;,</span><br><span class="line">      &quot;eslint --fix&quot;,</span><br><span class="line">      &quot;stylelint --fix&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;*.&#123;html,vue,vss,sass,less&#125;&quot;: [</span><br><span class="line">      &quot;prettier --write&quot;,</span><br><span class="line">      &quot;stylelint --fix&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;package.json&quot;: [</span><br><span class="line">      &quot;prettier --write&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;*.md&quot;: [</span><br><span class="line">      &quot;prettier --write&quot;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h4 id="修改触发命令"><a href="#修改触发命令" class="headerlink" title="修改触发命令"></a>修改触发命令</h4><p>修改 <code>.husky/pre-commit</code> 文件触发命令为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npx lint-staged</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>pre-commit</p>
<p>经过以上配置之后，就可以在每次提交之前对所有代码进行格式化，保证线上代码的规范性。</p>
<h1 id="提交规范"><a href="#提交规范" class="headerlink" title="提交规范"></a>提交规范</h1><p>多人协作项目中，在提交代码环节，也存在一种情况：不能保证每个人对提交信息的准确描述，因此会出现提交信息紊乱、风格不一致的情况。</p>
<p>如果 <code>git commit</code> 的描述信息精准，在后期维护和 Bug 处理时会变得有据可查，项目开发周期内还可以根据规范的提交信息快速生成开发日志，从而方便我们追踪项目和把控进度。</p>
<p>社区最流行、最知名、最受认可的 <strong>Angular</strong>[48] 团队提交规范：</p>
<p>Angular 团队提交规范</p>
<p>参考链接： <strong>Angular Style Commit Message Conventions</strong>[49]</p>
<h2 id="Commit-Message-格式规范"><a href="#Commit-Message-格式规范" class="headerlink" title="Commit Message 格式规范"></a>Commit Message 格式规范</h2><p><code>commit message</code> 由 Header、Body、Footer 组成。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Header&gt;</span><br><span class="line"></span><br><span class="line">&lt;Body&gt;</span><br><span class="line"></span><br><span class="line">&lt;Footer&gt;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="Header"><a href="#Header" class="headerlink" title="Header"></a>Header</h3><p>Header 部分包括三个字段 type（必需）、scope（可选）和 subject（必需）。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p><strong>type</strong></p>
<p>type 用于说明 commit 的提交类型（必须是以下几种之一）。</p>
<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">feat</td>
<td align="left">新增功能</td>
</tr>
<tr>
<td align="left">fix</td>
<td align="left">修复问题</td>
</tr>
<tr>
<td align="left">docs</td>
<td align="left">文档变更</td>
</tr>
<tr>
<td align="left">style</td>
<td align="left">代码格式（不影响功能，例如空格、分号等格式修正）</td>
</tr>
<tr>
<td align="left">refactor</td>
<td align="left">代码重构</td>
</tr>
<tr>
<td align="left">perf</td>
<td align="left">改善性能</td>
</tr>
<tr>
<td align="left">test</td>
<td align="left">测试</td>
</tr>
<tr>
<td align="left">build</td>
<td align="left">变更项目构建或外部依赖（例如 scopes: webpack、gulp、npm 等）</td>
</tr>
<tr>
<td align="left">ci</td>
<td align="left">更改持续集成软件的配置文件和 package 中的 scripts 命令，例如 scopes: Travis, Circle 等</td>
</tr>
<tr>
<td align="left">chore</td>
<td align="left">变更构建流程或辅助工具</td>
</tr>
<tr>
<td align="left">revert</td>
<td align="left">代码回退</td>
</tr>
</tbody></table>
<p><strong>scope</strong></p>
<p>scope 用于指定本次 commit 影响的范围。</p>
<p>scope 依据项目而定，例如在业务项目中可以依据菜单或者功能模块划分，如果是组件库开发，则可以依据组件划分。</p>
<p><strong>subject</strong></p>
<p>subject 是本次 commit 的简洁描述，长度约定在 50 个字符以内，通常遵循以下几个规范：</p>
<ul>
<li>用动词开头，第一人称现在时表述，例如：change 代替 changed 或 changes</li>
<li>第一个字母小写</li>
<li>结尾不加句号（.）</li>
</ul>
<h3 id="Body"><a href="#Body" class="headerlink" title="Body"></a>Body</h3><p>body 是对本次 commit 的详细描述，可以分成多行。</p>
<p>跟 subject 类似，用动词开头，body 应该说明修改的原因和更改前后的行为对比。</p>
<h3 id="Footer"><a href="#Footer" class="headerlink" title="Footer"></a>Footer</h3><p>如果本次提交的代码是突破性的变更或关闭缺陷，则 Footer 必需，否则可以省略。</p>
<ul>
<li><p>突破性的变更</p>
<p>当前代码与上一个版本有突破性改变，则 Footer 以 BREAKING CHANGE 开头，后面是对变动的描述、以及变动的理由。</p>
</li>
<li><p>关闭缺陷</p>
<p>如果当前提交是针对特定的 issue，那么可以在 Footer 部分填写需要关闭的单个 issue 或一系列 issues。</p>
</li>
</ul>
<h3 id="参考例子"><a href="#参考例子" class="headerlink" title="参考例子"></a>参考例子</h3><ul>
<li><p>feat</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">feat(browser): onUrlChange event (popstate/hashchange/polling)</span><br><span class="line"></span><br><span class="line">Added new event to browser:</span><br><span class="line">- forward popstate event if available</span><br><span class="line">- forward hashchange event if popstate not available</span><br><span class="line">- do polling when neither popstate nor hashchange available</span><br><span class="line"></span><br><span class="line">Breaks $browser.onHashChange, which was removed (use onUrlChange instead)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
</li>
<li><p>fix</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">fix(compile): couple of unit tests for IE9</span><br><span class="line"></span><br><span class="line">Older IEs serialize html uppercased, but IE9 does not...</span><br><span class="line">Would be better to expect case insensitive, unfortunately jasmine does</span><br><span class="line">not allow to user regexps for throw expectations.</span><br><span class="line"></span><br><span class="line">Closes #392</span><br><span class="line">Breaks foo.bar api, foo.baz should be used instead</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
</li>
<li><p>style</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">style(location): add couple of missing semi colons</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
</li>
<li><p>chore</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chore(release): v3.4.2</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="集成-cz-git-实现规范提交"><a href="#集成-cz-git-实现规范提交" class="headerlink" title="集成 cz-git 实现规范提交"></a>集成 cz-git 实现规范提交</h2><blockquote>
<p>一款工程性更强，轻量级，高度自定义，标准输出格式的 <strong>commitizen</strong>[50] 适配器</p>
<p>官方网站：<strong>cz-git</strong>[51]</p>
</blockquote>
<p>cz-git</p>
<h3 id="安装依赖-11"><a href="#安装依赖-11" class="headerlink" title="安装依赖"></a>安装依赖</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -D cz-git</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="指定适配器"><a href="#指定适配器" class="headerlink" title="指定适配器"></a>指定适配器</h3><p>修改 <code>package.json</code> 文件，添加 <code>config</code> 指定使用的适配器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;scripts&quot;: &#123;&#125;,</span><br><span class="line">  &quot;config&quot;: &#123;</span><br><span class="line">    &quot;commitizen&quot;: &#123;</span><br><span class="line">      &quot;path&quot;: &quot;node_modules/cz-git&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="自定义配置（可选）"><a href="#自定义配置（可选）" class="headerlink" title="自定义配置（可选）"></a>自定义配置（可选）</h3><p><strong>cz-git 与 commitlint[52] 进行联动给予校验信息</strong>，所以可以编写于 <strong>commitlint</strong>[53] 配置文件之中。</p>
<p>例如：(<strong>⇒ 配置模板</strong>[54])</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/** @type &#123;import(&#x27;cz-git&#x27;).UserConfig&#125; */</span><br><span class="line">module.exports = &#123;</span><br><span class="line">  extends: [&#x27;@commitlint/config-conventional&#x27;],</span><br><span class="line">  rules: &#123;&#125;,</span><br><span class="line">  prompt: &#123;</span><br><span class="line">    useEmoji: false,</span><br><span class="line">    emojiAlign: &#x27;center&#x27;,</span><br><span class="line">    allowCustomIssuePrefixs: false,</span><br><span class="line">    allowEmptyIssuePrefixs: false,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>本项目配置文件可参考：<strong>commitlint.config.js</strong>[55]</p>
<h3 id="全局使用"><a href="#全局使用" class="headerlink" title="全局使用"></a>全局使用</h3><blockquote>
<p>全局安装的好处在于：在任何项目下都可以利用 <code>cz</code> 或 <code>git cz</code> 命令启动命令行工具，生成标准化 commit message</p>
</blockquote>
<h4 id="安装全局依赖"><a href="#安装全局依赖" class="headerlink" title="安装全局依赖"></a>安装全局依赖</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cz-git commitizen</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h4 id="全局配置适配器类型"><a href="#全局配置适配器类型" class="headerlink" title="全局配置适配器类型"></a>全局配置适配器类型</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;&#123; &quot;path&quot;: &quot;cz-git&quot; &#125;&#x27; &gt; ~/.czrc</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h4 id="自定义配置（可选）-1"><a href="#自定义配置（可选）-1" class="headerlink" title="自定义配置（可选）"></a>自定义配置（可选）</h4><p><strong>方式一：</strong> 编辑 <code>~/.czrc</code> 文件以 <strong>json</strong> 形式添加配置，例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;path&quot;: &quot;cz-git&quot;,</span><br><span class="line">  &quot;useEmoji&quot;: true</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p><strong>方式二：与 commitlint[56] 配合</strong>，在 <code>$HOME</code> 路径下创建配置文件 (<strong>↓ 配置模板</strong>[57])</p>
<h2 id="集成-commitlint-验证规范提交"><a href="#集成-commitlint-验证规范提交" class="headerlink" title="集成 commitlint 验证规范提交"></a>集成 commitlint 验证规范提交</h2><p>在“代码规范”章节中提到，尽管制定了规范，但在多人协作的项目中，总有些人依旧我行我素。</p>
<p>因此提交代码这个环节，也增加一个限制：<strong>只让符合 Angular 规范的 commit message 通过</strong>。</p>
<p>此功能需借助 <code>@commitlint/config-conventional</code> 和 <code>@commitlint/cli</code> 工具来实现。</p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><ul>
<li><strong><code>@commitlint/cli</code></strong>[58] - Commitlint 本体</li>
<li><strong><code>@commitlint/config-conventional</code></strong>[59] - 通用提交规范</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i @commitlint/cli @commitlint/config-conventional -D</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>在项目根目录创建 <code>commitlint.config.js</code> 文件，并填入以下内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  extends: [&#x27;@commitlint/config-conventional&#x27;]</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>使用 husky 命令在 <code>.husky</code> 目录下创建 <code>commit-msg</code> 文件，并在此执行验证命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npx husky add .husky/commit-msg &quot;npx --no-install commitlint --edit $1&quot;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>commit-msg</p>
<blockquote>
<p>本项目完整代码托管在 <strong>GitHub 仓库</strong>[60]，欢迎点亮小星星 🌟🌟</p>
</blockquote>
<h1 id="自动部署"><a href="#自动部署" class="headerlink" title="自动部署"></a>自动部署</h1><p>本章节将介绍如何使用 CI（Continuous Integration 持续集成）服务来完成项目部署工作。</p>
<p>常见的 CI 工具有 GitHub Actions、GitLab CI、Travis CI、Circle CI 等。</p>
<p>本项目使用 <code>GitHub Actions</code> 来完成这一操作。</p>
<p>🔗 参考链接：<strong>GitHub Actions 入门教程</strong>[61]</p>
<h2 id="创建-GitHub-仓库"><a href="#创建-GitHub-仓库" class="headerlink" title="创建 GitHub 仓库"></a>创建 GitHub 仓库</h2><p>因为 GitHub Actions 只对 GitHub 仓库有效，所以<strong>创建 GitHub 仓库</strong>[62]来托管项目代码。</p>
<p>创建 GitHub 仓库</p>
<ul>
<li><code>master</code> 分支存储项目源代码</li>
<li><code>gh-pages</code> 分支存储打包后的静态文件</li>
</ul>
<h2 id="创建-GitHub-Token"><a href="#创建-GitHub-Token" class="headerlink" title="创建 GitHub Token"></a>创建 GitHub Token</h2><p>创建一个有 <strong>repo</strong> 和 <strong>workflow</strong> 权限的 <strong>GitHub Token</strong>[63]</p>
<p>创建 GitHub Token</p>
<blockquote>
<p>注意：新生成的 Token 只会显示一次。</p>
</blockquote>
<p>Token</p>
<h2 id="添加-Actions-secret"><a href="#添加-Actions-secret" class="headerlink" title="添加 Actions secret"></a>添加 Actions secret</h2><p>将上述创建的 Token 添加到 GitHub 仓库中的 <code>Secrets</code> 里，并将这个新增的 <code>secret</code> 命名为 <code>VITE_VUE_DEPLOY</code> 。</p>
<p>步骤：仓库 -&gt; <code>Settings</code> -&gt; <code>Secrets</code> -&gt; <code>Actions</code> -&gt; <code>New repository secret</code>。</p>
<p>New secret</p>
<blockquote>
<p>注意：新创建的 secret <code>VITE_VUE_DEPLOY</code> 在 Actions 配置文件中要用到，两个地方需保持一致！</p>
</blockquote>
<h2 id="修改-package-json"><a href="#修改-package-json" class="headerlink" title="修改 package.json"></a>修改 package.json</h2><p>打开 <code>package.json</code> 文件，新增 <code>homepage</code> 字段，表示该应用发布后的根目录（参见<strong>官方文档</strong>[64]）。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;homepage&quot;: &quot;https://[username].github.io/github-actions-demo&quot;,</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>上面代码中，将 <code>[username]</code> 替换成你的 GitHub 用户名，参见<strong>范例</strong>[65]。</p>
<h2 id="创建-Actions-配置文件"><a href="#创建-Actions-配置文件" class="headerlink" title="创建 Actions 配置文件"></a>创建 Actions 配置文件</h2><p>（1）在项目根目录下创建 <code>.github</code> 目录。</p>
<p>（2）在 <code>.github</code> 目录下创建 <code>workflows</code> 目录。</p>
<p>（3）在 <code>workflows</code> 目录下创建 <code>deploy.yml</code> 文件。</p>
<p>.github&#x2F;workflows&#x2F;deploy.yml</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">name: Vite Vue Deploy</span><br><span class="line"></span><br><span class="line">on:</span><br><span class="line">  push:</span><br><span class="line">    # master 分支有 push 时触发</span><br><span class="line">    branches: [master]</span><br><span class="line"></span><br><span class="line">jobs:</span><br><span class="line">  deploy:</span><br><span class="line">    # 指定虚拟机环境</span><br><span class="line">    runs-on: ubuntu-latest</span><br><span class="line"></span><br><span class="line">    strategy:</span><br><span class="line">      matrix:</span><br><span class="line">        node-version: [14.x, 16.x]</span><br><span class="line"></span><br><span class="line">    steps:</span><br><span class="line">      - name: Checkout</span><br><span class="line">        # 拉取 GitHub 仓库代码</span><br><span class="line">        uses: actions/checkout@v3</span><br><span class="line"></span><br><span class="line">      - name: Use Node.js $&#123;&#123; matrix.node-version &#125;&#125;</span><br><span class="line">        # 设定 Node.js 环境</span><br><span class="line">        uses: actions/setup-node@v3</span><br><span class="line">        with:</span><br><span class="line">          node-version: $&#123;&#123; matrix.node-version &#125;&#125;</span><br><span class="line"></span><br><span class="line">      - name: Install</span><br><span class="line">        # 安装依赖</span><br><span class="line">        run: npm install</span><br><span class="line"></span><br><span class="line">      - name: Build</span><br><span class="line">        # 打包</span><br><span class="line">        run: npm run build</span><br><span class="line"></span><br><span class="line">      - name: Deploy</span><br><span class="line">        uses: JamesIves/github-pages-deploy-action@v4</span><br><span class="line">        with:</span><br><span class="line">          # 部署打包目录</span><br><span class="line">          folder: dist</span><br><span class="line">          # 密钥名</span><br><span class="line">          token: $&#123;&#123; secrets.VITE_VUE_DEPLOY &#125;&#125;</span><br><span class="line">          # 分支</span><br><span class="line">          branch: gh-pages</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<blockquote>
<p>🔗 通过此链接 <strong>ElanYoung.github.io&#x2F;vite-vue-js…</strong>[66] 即可访问本项目</p>
</blockquote>
<h1 id="文章总结"><a href="#文章总结" class="headerlink" title="文章总结"></a>文章总结</h1><p>本文从技术选项到架构搭建、从代码规范约束到提交信息规范约束，一步一步带领大家如何从一个最简单的前端项目骨架到规范的前端工程化环境，基本涵盖前端项目开发的整个流程，特别适合刚接触前端工程化的同学学习。</p>
<p>因篇幅较长，所涉及技术点较多，难免会出现错误，希望大家多多指正，谢谢大家！</p>
<p>关于本文</p>
<blockquote>
<p>作者：威廉王子</p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/7156957907890733063">https://juejin.cn/post/7156957907890733063</a></p>
</blockquote>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://leejs.cn">黄贻飞</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://leejs.cn/8aca716b/">https://leejs.cn/8aca716b/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://leejs.cn" target="_blank">HaloHuang Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/vue3/">vue3</a><a class="post-meta__tags" href="/tags/watch/">watch</a><a class="post-meta__tags" href="/tags/watchEffect/">watchEffect</a></div><div class="post_share"><div class="social-share" data-image="https://images-origin.wallwiz.link/58860ba7dc1d3f00010acdef_1" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/c7bb02e1/"><img class="prev-cover" src="https://images-origin.wallwiz.link/58860ea56e9f6a00013b93a3_1" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">LetJs</div></div></a></div><div class="next-post pull-right"><a href="/0/"><img class="next-cover" src="https://images-origin.wallwiz.link/5976161269f78700012df74f_1" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info"></div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/1342917158/" title="vue3 watch 理解"><img class="cover" src="https://images-origin.wallwiz.link/58860f916e9f6a00013b94fb_1" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-12</div><div class="title">vue3 watch 理解</div></div></a></div><div><a href="/9a3c1b5f/" title="vue3 API学习列表"><img class="cover" src="https://images-origin.wallwiz.link/590bc66690c79d0001e9cbad_1" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-09-02</div><div class="title">vue3 API学习列表</div></div></a></div><div><a href="/82750b40/" title="vue3 双向绑定"><img class="cover" src="https://images-origin.wallwiz.link/58860e926e9f6a00013b9386_1" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-09-27</div><div class="title">vue3 双向绑定</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">黄贻飞</div><div class="author-info__description">学习 生活 成长</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">64</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">36</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">15</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8A%80%E6%9C%AF%E6%A0%88"><span class="toc-number">2.</span> <span class="toc-text">技术栈</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E6%90%AD%E5%BB%BA"><span class="toc-number">3.</span> <span class="toc-text">基础搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%84%E5%BB%BA%E9%A1%B9%E7%9B%AE%E9%9B%8F%E5%BD%A2"><span class="toc-number">3.1.</span> <span class="toc-text">构建项目雏形</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vite-%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE"><span class="toc-number">3.2.</span> <span class="toc-text">Vite 基础配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%84%E8%8C%83%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-number">3.3.</span> <span class="toc-text">规范目录结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9B%86%E6%88%90-Vue-Router-%E8%B7%AF%E7%94%B1%E5%B7%A5%E5%85%B7"><span class="toc-number">3.4.</span> <span class="toc-text">集成 Vue Router 路由工具</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96"><span class="toc-number">3.4.1.</span> <span class="toc-text">安装依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">3.4.2.</span> <span class="toc-text">创建路由配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%82%E8%BD%BD%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE"><span class="toc-number">3.4.3.</span> <span class="toc-text">挂载路由配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9B%86%E6%88%90-Pinia-%E5%85%A8%E5%B1%80%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7"><span class="toc-number">3.5.</span> <span class="toc-text">集成 Pinia 全局状态管理工具</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96-1"><span class="toc-number">3.5.1.</span> <span class="toc-text">安装依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E4%BB%93%E5%BA%93%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">3.5.2.</span> <span class="toc-text">创建仓库配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%82%E8%BD%BD-Pinia-%E9%85%8D%E7%BD%AE"><span class="toc-number">3.5.3.</span> <span class="toc-text">挂载 Pinia 配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9B%86%E6%88%90-TDesign-Vue-Next-%E7%BB%84%E4%BB%B6%E5%BA%93"><span class="toc-number">3.6.</span> <span class="toc-text">集成 TDesign Vue Next 组件库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96-2"><span class="toc-number">3.6.1.</span> <span class="toc-text">安装依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8"><span class="toc-number">3.6.2.</span> <span class="toc-text">基础使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%89%E9%9C%80%E5%BC%95%E5%85%A5"><span class="toc-number">3.6.3.</span> <span class="toc-text">按需引入</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9B%86%E6%88%90-Axios-HTTP-%E5%B7%A5%E5%85%B7"><span class="toc-number">3.7.</span> <span class="toc-text">集成 Axios HTTP 工具</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96-3"><span class="toc-number">3.7.1.</span> <span class="toc-text">安装依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E9%85%8D%E7%BD%AE"><span class="toc-number">3.7.2.</span> <span class="toc-text">请求配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E6%8B%9F%E6%BC%94%E7%A4%BA"><span class="toc-number">3.7.3.</span> <span class="toc-text">模拟演示</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9B%86%E6%88%90-CSS-%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8-Less"><span class="toc-number">3.8.</span> <span class="toc-text">集成 CSS 预处理器 Less</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96-4"><span class="toc-number">3.8.1.</span> <span class="toc-text">安装依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8"><span class="toc-number">3.8.2.</span> <span class="toc-text">如何使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E6%A0%B7%E5%BC%8F"><span class="toc-number">3.8.3.</span> <span class="toc-text">全局样式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B7%E5%BC%8F%E7%A9%BF%E9%80%8F"><span class="toc-number">3.8.4.</span> <span class="toc-text">样式穿透</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83"><span class="toc-number">4.</span> <span class="toc-text">代码规范</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9B%86%E6%88%90-EditorConfig-%E9%85%8D%E7%BD%AE"><span class="toc-number">4.1.</span> <span class="toc-text">集成 EditorConfig 配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9B%86%E6%88%90-ESLint-%E9%85%8D%E7%BD%AE"><span class="toc-number">4.2.</span> <span class="toc-text">集成 ESLint 配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96-5"><span class="toc-number">4.2.1.</span> <span class="toc-text">安装依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6"><span class="toc-number">4.2.2.</span> <span class="toc-text">安装插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-ESLint-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">4.2.3.</span> <span class="toc-text">创建 ESLint 配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-ESLint-%E8%BF%87%E6%BB%A4%E8%A7%84%E5%88%99"><span class="toc-number">4.2.4.</span> <span class="toc-text">创建 ESLint 过滤规则</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9B%86%E6%88%90-Prettier-%E9%85%8D%E7%BD%AE"><span class="toc-number">4.3.</span> <span class="toc-text">集成 Prettier 配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96-6"><span class="toc-number">4.3.1.</span> <span class="toc-text">安装依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6-1"><span class="toc-number">4.3.2.</span> <span class="toc-text">安装插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-Prettier-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">4.3.3.</span> <span class="toc-text">创建 Prettier 配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-Prettier-%E8%BF%87%E6%BB%A4%E8%A7%84%E5%88%99"><span class="toc-number">4.3.4.</span> <span class="toc-text">创建 Prettier 过滤规则</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3-Prettier-%E5%92%8C-ESLint-%E5%86%B2%E7%AA%81"><span class="toc-number">4.4.</span> <span class="toc-text">解决 Prettier 和 ESLint 冲突</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96-7"><span class="toc-number">4.4.1.</span> <span class="toc-text">安装依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9-ESLint-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">4.4.2.</span> <span class="toc-text">修改 ESLint 配置文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E6%A0%BC%E5%BC%8F%E5%8C%96%E4%BB%A3%E7%A0%81"><span class="toc-number">4.5.</span> <span class="toc-text">自动格式化代码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9B%86%E6%88%90-Stylelint-%E9%85%8D%E7%BD%AE"><span class="toc-number">4.6.</span> <span class="toc-text">集成 Stylelint 配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96-8"><span class="toc-number">4.6.1.</span> <span class="toc-text">安装依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6-2"><span class="toc-number">4.6.2.</span> <span class="toc-text">安装插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-Stylelint-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">4.6.3.</span> <span class="toc-text">创建 Stylelint 配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-Stylelint-%E8%BF%87%E6%BB%A4%E8%A7%84%E5%88%99"><span class="toc-number">4.6.4.</span> <span class="toc-text">创建 Stylelint 过滤规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E7%94%A8-Vue-%E6%96%87%E4%BB%B6%E6%94%AF%E6%8C%81"><span class="toc-number">4.6.5.</span> <span class="toc-text">启用 Vue 文件支持</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96-9"><span class="toc-number">4.6.5.1.</span> <span class="toc-text">安装依赖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9-Stylelint-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">4.6.5.2.</span> <span class="toc-text">修改 Stylelint 配置文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9-Visual-Studio-Code-%E5%B7%A5%E4%BD%9C%E5%8C%BA%E9%85%8D%E7%BD%AE"><span class="toc-number">4.6.5.3.</span> <span class="toc-text">修改 Visual Studio Code 工作区配置</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9B%86%E6%88%90-husky-%E5%92%8C-lint-staged"><span class="toc-number">4.7.</span> <span class="toc-text">集成 husky 和 lint-staged</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-husky"><span class="toc-number">4.7.1.</span> <span class="toc-text">配置 husky</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-lint-staged"><span class="toc-number">4.7.2.</span> <span class="toc-text">配置 lint-staged</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96-10"><span class="toc-number">4.7.2.1.</span> <span class="toc-text">安装依赖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E%E9%85%8D%E7%BD%AE"><span class="toc-number">4.7.2.2.</span> <span class="toc-text">新增配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A7%A6%E5%8F%91%E5%91%BD%E4%BB%A4"><span class="toc-number">4.7.2.3.</span> <span class="toc-text">修改触发命令</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8F%90%E4%BA%A4%E8%A7%84%E8%8C%83"><span class="toc-number">5.</span> <span class="toc-text">提交规范</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Commit-Message-%E6%A0%BC%E5%BC%8F%E8%A7%84%E8%8C%83"><span class="toc-number">5.1.</span> <span class="toc-text">Commit Message 格式规范</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Header"><span class="toc-number">5.1.1.</span> <span class="toc-text">Header</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Body"><span class="toc-number">5.1.2.</span> <span class="toc-text">Body</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Footer"><span class="toc-number">5.1.3.</span> <span class="toc-text">Footer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E4%BE%8B%E5%AD%90"><span class="toc-number">5.1.4.</span> <span class="toc-text">参考例子</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9B%86%E6%88%90-cz-git-%E5%AE%9E%E7%8E%B0%E8%A7%84%E8%8C%83%E6%8F%90%E4%BA%A4"><span class="toc-number">5.2.</span> <span class="toc-text">集成 cz-git 实现规范提交</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96-11"><span class="toc-number">5.2.1.</span> <span class="toc-text">安装依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E5%AE%9A%E9%80%82%E9%85%8D%E5%99%A8"><span class="toc-number">5.2.2.</span> <span class="toc-text">指定适配器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E9%85%8D%E7%BD%AE%EF%BC%88%E5%8F%AF%E9%80%89%EF%BC%89"><span class="toc-number">5.2.3.</span> <span class="toc-text">自定义配置（可选）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E4%BD%BF%E7%94%A8"><span class="toc-number">5.2.4.</span> <span class="toc-text">全局使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E5%85%A8%E5%B1%80%E4%BE%9D%E8%B5%96"><span class="toc-number">5.2.4.1.</span> <span class="toc-text">安装全局依赖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE%E9%80%82%E9%85%8D%E5%99%A8%E7%B1%BB%E5%9E%8B"><span class="toc-number">5.2.4.2.</span> <span class="toc-text">全局配置适配器类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E9%85%8D%E7%BD%AE%EF%BC%88%E5%8F%AF%E9%80%89%EF%BC%89-1"><span class="toc-number">5.2.4.3.</span> <span class="toc-text">自定义配置（可选）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9B%86%E6%88%90-commitlint-%E9%AA%8C%E8%AF%81%E8%A7%84%E8%8C%83%E6%8F%90%E4%BA%A4"><span class="toc-number">5.3.</span> <span class="toc-text">集成 commitlint 验证规范提交</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-number">5.3.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE"><span class="toc-number">5.3.2.</span> <span class="toc-text">配置</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2"><span class="toc-number">6.</span> <span class="toc-text">自动部署</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-GitHub-%E4%BB%93%E5%BA%93"><span class="toc-number">6.1.</span> <span class="toc-text">创建 GitHub 仓库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-GitHub-Token"><span class="toc-number">6.2.</span> <span class="toc-text">创建 GitHub Token</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0-Actions-secret"><span class="toc-number">6.3.</span> <span class="toc-text">添加 Actions secret</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9-package-json"><span class="toc-number">6.4.</span> <span class="toc-text">修改 package.json</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-Actions-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">6.5.</span> <span class="toc-text">创建 Actions 配置文件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E6%80%BB%E7%BB%93"><span class="toc-number">7.</span> <span class="toc-text">文章总结</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/57cd23c4/" title="vue 常见的坑"><img src="https://images-origin.wallwiz.link/58860ea5bcf65400017a54f0_1" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="vue 常见的坑"/></a><div class="content"><a class="title" href="/57cd23c4/" title="vue 常见的坑">vue 常见的坑</a><time datetime="2023-05-23T09:49:22.000Z" title="发表于 2023-05-23 17:49:22">2023-05-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/8114936a/" title="vue 原理"><img src="https://images-origin.wallwiz.link/58860f906e9f6a00013b94fa_1" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="vue 原理"/></a><div class="content"><a class="title" href="/8114936a/" title="vue 原理">vue 原理</a><time datetime="2023-05-15T05:38:12.000Z" title="发表于 2023-05-15 13:38:12">2023-05-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2377b695/" title="reduce 使用技巧"><img src="https://images-origin.wallwiz.link/5976161269f78700012df74f_1" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="reduce 使用技巧"/></a><div class="content"><a class="title" href="/2377b695/" title="reduce 使用技巧">reduce 使用技巧</a><time datetime="2023-05-09T11:45:11.000Z" title="发表于 2023-05-09 19:45:11">2023-05-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/88f781f4/" title="unplugin-auto-import 和 unplugin-vue-components"><img src="https://images-origin.wallwiz.link/58860ead6e9f6a00013b93b1_1" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="unplugin-auto-import 和 unplugin-vue-components"/></a><div class="content"><a class="title" href="/88f781f4/" title="unplugin-auto-import 和 unplugin-vue-components">unplugin-auto-import 和 unplugin-vue-components</a><time datetime="2023-02-24T07:50:35.000Z" title="发表于 2023-02-24 15:50:35">2023-02-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/4af6e48a/" title="npm registry"><img src="https://images-origin.wallwiz.link/58860ead6e9f6a00013b93b1_1" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="npm registry"/></a><div class="content"><a class="title" href="/4af6e48a/" title="npm registry">npm registry</a><time datetime="2023-02-21T08:50:50.000Z" title="发表于 2023-02-21 16:50:50">2023-02-21</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By 黄贻飞</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>